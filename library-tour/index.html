<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>National Meteorological Library VR Experience</title>
    <meta name="description" content="National Meteorological Library VR Experience">
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-template-component@3.1.1"></script>
    <!-- <script src="components/emit-on-click.js"></script> -->
  </head>

  <body>
    <a-scene>

      <a-assets>
        <img id="lib-360-background" src="images/lib-background.JPG">
        <img id="d-day-info" src="images/dday-info.svg">
        <img id="fitzroy-info" src="images/fitzroy-info.svg">
        <img id="clock-info" src="images/clock-info.svg">
        <img id="beagle-info" src="images/beagle-info.svg">
        <img id="air-meters-info" src="images/air-meters-info.svg">
        <img id="thermometers-info" src="images/thermometers-info.svg">
        <img id="barometers-info" src="images/barometers-info.svg">
        <img id="sunshine-info" src="images/sunshine-meters.svg">
        <img id="weather-lore-info" src="images/weather-lore-info.svg">
        <img id="uniform-info" src="images/uniform-info.svg">
        <img id="skua-rocket-info" src="images/skua-rocket-info.svg">
        <img id="microwave-info" src="images/microwave-info.svg">
        <img id="met-aeroplanes-info" src="images/met-aeroplanes-info.svg">
        <img id="close-button" src="images/close-button.svg">
        <img id="POI-marker-icon" src="images/POI-marker-icon.png">
      </a-assets>
      <!-- 360 background -->
      <a-sky id="image-360" radius="100" src="#lib-360-background" rotation="0 -20 0"></a-sky>

      <!-- POI MARKERS -->
      <!-- Fitzroy Portrait -->
      <a-image id="fitzroy-POI-marker" marker-id="fitzroy" marker-for="fitzroy-POI-panel" src="#POI-marker-icon"
        position="10 3 -10"
        rotation="0 -45 0"
        height="1.5"
        width="1.5">
      </a-image>
      <!-- Fitzroy Clock -->
      <a-image id="clock-POI-marker" src="#POI-marker-icon"
        position="7 -2 -8"
        rotation="0 -45 0"
        height="1.5"
        width="1.5"
        emit-on-click="emit: clock-POI-panel-open; target: #clock-POI-panel">
      </a-image>
      <!-- HMS Beagle Model -->
      <a-image id="beagle-POI-marker" marker-id="beagle" marker-for="beagle-POI-panel" src="#POI-marker-icon"
        position="3 2.5 -10"
        rotation="0 0 0"
        height="1.5"
        width="1.5">
      </a-image>
      <!-- Meteorological Aeroplanes -->
      <a-image id"met-aeroplanes-POI-marker" src="#POI-marker-icon"
        position="10 0 0"
        rotation="0 90 0"
        emit-on-click="emit: met-aeroplanes-POI-panel-open; target: #met-aeroplanes-POI-panel">
      </a-image>
      <!-- Display case 1 -->
      <a-image id="instruments-POI-marker-1" marker-id="instruments-1" marker-for="instruments-POI-panel-1" src="#POI-marker-icon"
        position="5.5 -3 6"
        rotation="0 90 0"
        emit-on-click="emit: instruments-POI-panel-1-open; target: #instruments-POI-panel-1">
      </a-image>
      <!-- Display case 2 -->
      <a-image id="instruments-POI-marker-2" marker-id="instruments-2" marker-for="instruments-POI-panel-2" src="#POI-marker-icon"
        position="-5 -3 2.5"
        rotation="0 90 0"
        emit-on-click="emit: instruments-POI-panel-2-open; target: #instruments-POI-panel-2">
      </a-image>
      <!-- Display case 3 -->
      <a-image id="instruments-POI-marker-3" src="#POI-marker-icon"
        position="8 -2.5 2"
        rotation="0 90 0"
        emit-on-click="emit: instruments-POI-panel-3-open; target: #instruments-POI-panel-3">
      </a-image>
      <!-- Display case 4 -->
      <a-image id="instruments-POI-marker-4" src="#POI-marker-icon"
        position="-5 -1 3.5"
        rotation="0 90 0"
        emit-on-click="emit: instruments-POI-panel-4-open; target: #instruments-POI-panel-4">
      </a-image>
      <!-- D-day weather chart -->
      <a-image id="weather-chart-POI-marker" marker-id="weather-chart" marker-for="weather-chart-POI-panel" src="#POI-marker-icon"
        position="-6.4 3 -10"
        height="1.5"
        width="1.5"
        emit-on-click="emit: weather-chart-POI-panel-open; target: #weather-chart-POI-panel">
      </a-image>
      <!-- Air Observer Uniform -->
      <a-image id="uniform-POI-marker" marker-id="uniform" marker-for="uniform-POI-panel" src="#POI-marker-icon"
        position="-13 7 -10"
        rotation="0 45 0"
        height="1.5"
        width="1.5"
        emit-on-click="emit: uniform-POI-panel-open; target: #uniform-POI-panel">
      </a-image>
      <!-- Archives Display Case -->
      <a-image id="archives-case-POI-marker" marker-id="archives-case" marker-for="archives-case-POI-panel" src="#POI-marker-icon"
        position="-15 1 -1"
        rotation="0 -90 0"
        height="1.5"
        width="1.5"
        emit-on-click="emit: archives-case-POI-panel-open; target: #archives-case-POI-panel">
      </a-image>
      <!-- Skua rocket -->
      <a-image id="skua-rocket-POI-marker" marker-id="skua-rocket" marker-for="skua-rocket-POI-panel" src="#POI-marker-icon"
        position = "-10 1 -4"
        rotation = "0 95 0"
        emit-on-click="emit: skua-rocket-POI-panel-open; target: #skua-rocket-POI-panel">
      </a-image>
      <!-- Advanced microwave sounding unit -->
      <a-image id="microwave-POI-marker" marker-id="microwave" marker-for="microwave-POI-panel" src="#POI-marker-icon"
        position = "-8 1 4"
        rotation = "0 95 0"
        emit-on-click="emit: microwave-POI-panel-open; target: #microwave-POI-panel">
      </a-image>

      <!-- POI PANELS -->
      <!-- Fitzroy Portrait -->
      <a-entity id="fitzroy-POI-panel" visible="false"
        position="4 1.5 -4"
        rotation="20 -45 0">
        <a-image src=#fitzroy-info
          height="4"
          width="5.16">
        </a-image>
        <a-image class="close-button" src="#close-button"
          width="0.5"
          height="0.5"
          position="2.3 1.8 0.1">
        </a-image>
      </a-entity>
      <!-- Fitzroy Clock -->
      <a-entity id="clock-POI-panel" visible="false"
        position="3 0 -3"
        rotation="0 -45 0"
        animation__show="property: visible; startEvents: clock-POI-panel-open; to: true"
        animation__hide="property: visible; startEvents: clock-POI-panel-close; from: false; to: true; dir: reverse">
        <a-image src=#clock-info
          width="4.72"
          height="4">
        </a-image>
        <a-image src="#close-button"
          width="0.5"
          height="0.5"
          position="2.2 1.8 0.1"
          emit-on-click="emit: clock-POI-panel-close; target: #clock-POI-panel">
        </a-image>
      </a-entity>
      <!-- HMS Beagle Model -->
      <a-entity id="beagle-POI-panel" visible="false"
        position="1.3 1.5 -4"
        rotation="10 -15 0">
        <a-image src=#beagle-info
          height="4"
          width="5.64">
        </a-image>
        <a-image class="close-button" src="#close-button"
          width="0.5"
          height="0.5"
          position="2.5 1.7 0.1">
        </a-image>
      </a-entity>
      <!-- Meteorological Aeroplanes -->
      <a-entity id="met-aeroplanes-POI-panel" visible="false"
        position="7 1 1"
        rotation="0 280 0"
        animation__show="property: visible; startEvents: met-aeroplanes-POI-panel-open; to: true"
        animation__hide="property: visible; startEvents: met-aeroplanes-POI-panel-close; from: false; to: true; dir: reverse">
        <a-image src="#met-aeroplanes-info"
          width="5.85"
          height="5">
        </a-image>
        <a-image src="#close-button"
          position="2.3 2 0.5"
          width="0.5"
          height="0.5"
          emit-on-click="emit: met-aeroplanes-POI-panel-close; target: #met-aeroplanes-POI-panel">
        </a-image>
      </a-entity>
      <!-- Display case 1 -->
      <a-entity id="instruments-POI-panel-1" visible="false"
        position="4 0 2"
        rotation="0 250 0">
        <a-image src="#thermometers-info"
          height="5"
          width="6.15">
        </a-image>
        <a-image class="close-button" src="#close-button"
          position="2.3 2 0.5"
          width="0.5"
          height="0.5">
        </a-image>
      </a-entity>
      <!-- Display case 2 -->
      <a-entity id="instruments-POI-panel-2" visible="false"
        position="-4 0 2"
        rotation="0 110 0">
        <a-image src="#barometers-info"
          height="4"
          width="4.88">
        </a-image>
        <a-image src="#close-button"
          position="1.95 1.55 0.5"
          width="0.5"
          height="0.5">
        </a-image>
      </a-entity>
      <!-- Display case 3 -->
      <a-entity id="instruments-POI-panel-3" visible="false"
        position="3 0.5 1.5"
        rotation="0 260 0"
        animation__show="property: visible; startEvents: instruments-POI-panel-3-open; to: true"
        animation__hide="property: visible; startEvents: instruments-POI-panel-3-close; from: false; to: true; dir: reverse">
        <a-image src="#sunshine-info"
          height="4"
          width="4.68">
        </a-image>
        <a-image src="#close-button"
          position="2 1.7 0.1"
          width="0.5"
          height="0.5"
          emit-on-click="emit: instruments-POI-panel-3-close; target: #instruments-POI-panel-3">
        </a-image>
      </a-entity>
      <!-- Display case 4 -->
      <a-entity id="instruments-POI-panel-4" visible="false"
        position="-4 0 2"
        rotation="0 110 0"
        animation__show="property: visible; startEvents: instruments-POI-panel-4-open; to: true"
        animation__hide="property: visible; startEvents: instruments-POI-panel-4-close; from: false; to: true; dir: reverse">
        <a-image src="#air-meters-info"
          height="4"
          width="4.88">
        </a-image>
        <a-image src="#close-button"
          position="1.95 1.55 0.5"
          width="0.5"
          height="0.5"
          emit-on-click="emit: instruments-POI-panel-4-close; target: #instruments-POI-panel-4">
        </a-image>
      </a-entity>
      <!-- D-day weather chart -->
      <a-entity id="weather-chart-POI-panel" visible="false"
        position="-4 2.5 -5"
        rotation="10 35 0">
        <a-image src=#d-day-info
          height="7.38"
          width="8.56">
        </a-image>
        <a-image class="close-button" src="#close-button"
          width="0.5"
          height="0.5"
          position="3.6 3.18 0.3">
        </a-image>
      </a-entity>
      <!-- Air Observer Uniform -->
      <a-entity id="uniform-POI-panel" visible="false"
        position="-8 0 -5"
        rotation="0 50 0">
        <a-image src=#uniform-info
          height="8"
          width="8.96"
          rotation="0 0 0">
        </a-image>
        <a-image class="close-button" src="#close-button"
          width="0.5"
          height="0.5"
          position="4 3.6 0.1">
        </a-image>
      </a-entity>
      <!-- Archives display case -->
      <a-entity id="archives-case-POI-panel" visible="false"
        position="-5 0 0"
        rotation="0 90 0">
        <a-image src="#weather-lore-info"
          width="7.5"
          height="6">
        </a-image>
        <a-image class="close-button" src="#close-button"
          width="0.5"
          height="0.5"
          position="3.2 2.5 0.1">
        </a-image>
      </a-entity>
      <!-- Skua rocket -->
      <a-entity id="skua-rocket-POI-panel" visible="false"
        position="-6 1 -5.5"
        rotation="10 60 0">
        <a-image src="#skua-rocket-info"
          height="6"
          width="6.72"
          rotation = "0 0 0">
        </a-image>
        <a-image src="#close-button"
          position="2.4 2.4 1"
          width="0.5"
          height="0.5">
        </a-image>
      </a-entity>
      <!-- Advanced microwave sounding unit -->
      <a-entity id="microwave-POI-panel" visible="false"
        position="-7 1 2"
        rotation="0 90 0">
        <a-image src="#microwave-info"
          height="6"
          width="7.02">
        </a-image>
        <a-image src="#close-button"
          position="3 2.2 1"
          width="0.5"
          height="0.5">
        </a-image>
      </a-entity>


      <!-- Camera + cursor. -->
      <a-entity camera look-controls>
        <a-cursor id="cursor"
          animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
          animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
          event-set__1="_event: mouseenter; color: #b9dc0c"
          event-set__2="_event: mouseleave; color: black"
          fuse="true"></a-cursor>
      </a-entity>
    </a-scene>

    <script type="text/javascript">

      // $(function(){
      //   $('[marker-id]').click(function(){
      //     var target = document.getElementById($(this).attr('marker-for'));
      //     var event = new Event($(this).attr('marker-id')+'-POI-panel-open');
      //     console.log(event);
      //     target.dispatchEvent(event);
      //   });
      // });

      $(function(){
        // show a panel when its marker is clicked on
        $('[marker-id]').click(function(){
          var target = document.getElementById($(this).attr('marker-for'));
          target.setAttribute('visible', true);
        });
      });

      $(function(){
        // hide a panel when its close button is clicked on
        $('.close-button').click(function(){
          var target = this.parentElement;
          target.setAttribute('visible', false);
        });
      });

    </script>

  </body>
</html>
